  [1m[35m (48.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (37.6ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (1.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3727846265690751645)[0m
  [1m[35m (1.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateRestaurants (20171103160648)
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (35.7ms)[0m  [1m[35mCREATE TABLE "restaurants" ("id" bigserial primary key, "name" character varying, "address" character varying, "subway" character varying, "opened_at" time, "closed_at" time, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35mSQL (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20171103160648"]]
  [1m[35m (0.0ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateTables (20171103160655)
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (26.6ms)[0m  [1m[35mCREATE TABLE "tables" ("id" bigserial primary key, "restaurant_id" bigint, "number_table" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, CONSTRAINT "fk_rails_0700cfe41e"
FOREIGN KEY ("restaurant_id")
  REFERENCES "restaurants" ("id")
)[0m
  [1m[35m (13.8ms)[0m  [1m[35mCREATE  INDEX  "index_tables_on_restaurant_id" ON "tables"  ("restaurant_id")[0m
  [1m[35mSQL (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20171103160655"]]
  [1m[35m (5.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateReservations (20171103160706)
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (18.0ms)[0m  [1m[35mCREATE TABLE "reservations" ("id" bigserial primary key, "table_id" bigint, "starts_at" timestamp, "ends_at" timestamp, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, CONSTRAINT "fk_rails_23ce71128d"
FOREIGN KEY ("table_id")
  REFERENCES "tables" ("id")
)[0m
  [1m[35m (12.1ms)[0m  [1m[35mCREATE  INDEX  "index_reservations_on_table_id" ON "reservations"  ("table_id")[0m
  [1m[35mSQL (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20171103160706"]]
  [1m[35m (5.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateVisitors (20171103160713)
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (34.4ms)[0m  [1m[35mCREATE TABLE "visitors" ("id" bigserial primary key, "reservation_id" bigint, "name" character varying, "phone" character varying, "note" text, "number_persons" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, CONSTRAINT "fk_rails_00894d9125"
FOREIGN KEY ("reservation_id")
  REFERENCES "reservations" ("id")
)[0m
  [1m[35m (12.7ms)[0m  [1m[35mCREATE  INDEX  "index_visitors_on_reservation_id" ON "visitors"  ("reservation_id")[0m
  [1m[35mSQL (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20171103160713"]]
  [1m[35m (5.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (3.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2017-11-03 16:10:51.348282"], ["updated_at", "2017-11-03 16:10:51.348282"]]
  [1m[35m (4.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT pg_advisory_unlock(3727846265690751645)[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/" for 127.0.0.1 at 2017-11-03 19:19:49 +0300
  [1m[35m (4.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by WelcomeController#index as HTML
  Rendering welcome/index.html.erb within layouts/application
  Rendered welcome/index.html.erb within layouts/application (2.0ms)
Completed 200 OK in 10841ms (Views: 10820.5ms | ActiveRecord: 0.0ms)


Started GET "/restaurants" for 127.0.0.1 at 2017-11-03 19:20:26 +0300
Processing by RestaurantsController#index as HTML
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  Rendered restaurants/index.html.erb within layouts/application (82.2ms)
Completed 200 OK in 207ms (Views: 175.6ms | ActiveRecord: 20.0ms)


Started GET "/restaurants/new" for 127.0.0.1 at 2017-11-03 19:20:28 +0300
Processing by RestaurantsController#new as HTML
  Rendering restaurants/new.html.erb within layouts/application
  Rendered restaurants/_form.html.erb (83.8ms)
  Rendered restaurants/new.html.erb within layouts/application (89.8ms)
Completed 200 OK in 234ms (Views: 214.0ms | ActiveRecord: 5.0ms)


Started POST "/restaurants" for 127.0.0.1 at 2017-11-03 19:23:43 +0300
Processing by RestaurantsController#create as HTML
  Parameters: {"utf8"=>"‚úì", "authenticity_token"=>"KLRrVMRdWimyMvS1ZWBTsHo2dL0mMOMEYwpl4AqyP9dGjIcK+odW7lq2u5vN/7ylLHY+dp24jNxWDiOqkoMpcA==", "restaurant"=>{"name"=>"–†–µ—Å—Ç–æ—Ä–∞–Ω Yu.S bar (–Æ—Å –±–∞—Ä)", "address"=>"–£–∫—Ä–∞–∏–Ω–∞, –ö–∏–µ–≤, –°–∞–∫—Å–∞–≥–∞–Ω—Å–∫–æ–≥–æ, 129 –∞", "subway"=>"–í–æ–∫–∑–∞–ª—å–Ω–∞—è, –£–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç", "opened_at(1i)"=>"2017", "opened_at(2i)"=>"11", "opened_at(3i)"=>"3", "opened_at(4i)"=>"10", "opened_at(5i)"=>"00", "closed_at(1i)"=>"2017", "closed_at(2i)"=>"11", "closed_at(3i)"=>"3", "closed_at(4i)"=>"23", "closed_at(5i)"=>"00"}, "commit"=>"Create Restaurant"}
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (3.0ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "address", "subway", "opened_at", "closed_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "–†–µ—Å—Ç–æ—Ä–∞–Ω Yu.S bar (–Æ—Å –±–∞—Ä)"], ["address", "–£–∫—Ä–∞–∏–Ω–∞, –ö–∏–µ–≤, –°–∞–∫—Å–∞–≥–∞–Ω—Å–∫–æ–≥–æ, 129 –∞"], ["subway", "–í–æ–∫–∑–∞–ª—å–Ω–∞—è, –£–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç"], ["opened_at", "2017-11-03 10:00:00"], ["closed_at", "2017-11-03 23:00:00"], ["created_at", "2017-11-03 16:23:43.970954"], ["updated_at", "2017-11-03 16:23:43.970954"]]
  [1m[35m (11.2ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/restaurants/1
Completed 302 Found in 30ms (ActiveRecord: 14.2ms)


Started GET "/restaurants/1" for 127.0.0.1 at 2017-11-03 19:23:44 +0300
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mRestaurant Load (0.0ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendering restaurants/show.html.erb within layouts/application
  Rendered restaurants/show.html.erb within layouts/application (2.0ms)
Completed 200 OK in 172ms (Views: 145.3ms | ActiveRecord: 0.0ms)


Started GET "/restaurants" for 127.0.0.1 at 2017-11-03 19:23:47 +0300
Processing by RestaurantsController#index as HTML
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (2.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  Rendered restaurants/index.html.erb within layouts/application (5.9ms)
Completed 200 OK in 107ms (Views: 111.8ms | ActiveRecord: 2.0ms)


Started GET "/restaurants/new" for 127.0.0.1 at 2017-11-03 19:23:58 +0300
Processing by RestaurantsController#new as HTML
  Rendering restaurants/new.html.erb within layouts/application
  Rendered restaurants/_form.html.erb (12.1ms)
  Rendered restaurants/new.html.erb within layouts/application (19.1ms)
Completed 200 OK in 167ms (Views: 158.9ms | ActiveRecord: 0.0ms)


Started POST "/restaurants" for 127.0.0.1 at 2017-11-03 19:24:36 +0300
Processing by RestaurantsController#create as HTML
  Parameters: {"utf8"=>"‚úì", "authenticity_token"=>"rUPo9hyXQRf6JOFErx3x7WMCZClEh+c9oudZRZ8Cht3DewSoIk1N0BKgrmoHgh74NUIu4v8PiOWX4x8PBzOQeg==", "restaurant"=>{"name"=>"Grill Do Brasil", "address"=>"–£–∫—Ä–∞–∏–Ω–∞, –ö–∏–µ–≤, –±—É–ª. –õ–µ—Å–∏ –£–∫—Ä–∞–∏–Ω–∫–∏, 24", "subway"=>"–ü–µ—á–µ—Ä—Å–∫–∞—è", "opened_at(1i)"=>"2017", "opened_at(2i)"=>"11", "opened_at(3i)"=>"3", "opened_at(4i)"=>"12", "opened_at(5i)"=>"00", "closed_at(1i)"=>"2017", "closed_at(2i)"=>"11", "closed_at(3i)"=>"3", "closed_at(4i)"=>"23", "closed_at(5i)"=>"00"}, "commit"=>"Create Restaurant"}
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "address", "subway", "opened_at", "closed_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "Grill Do Brasil"], ["address", "–£–∫—Ä–∞–∏–Ω–∞, –ö–∏–µ–≤, –±—É–ª. –õ–µ—Å–∏ –£–∫—Ä–∞–∏–Ω–∫–∏, 24"], ["subway", "–ü–µ—á–µ—Ä—Å–∫–∞—è"], ["opened_at", "2017-11-03 12:00:00"], ["closed_at", "2017-11-03 23:00:00"], ["created_at", "2017-11-03 16:24:36.379562"], ["updated_at", "2017-11-03 16:24:36.379562"]]
  [1m[35m (6.0ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/restaurants/2
Completed 302 Found in 26ms (ActiveRecord: 7.0ms)


Started GET "/restaurants/2" for 127.0.0.1 at 2017-11-03 19:24:36 +0300
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mRestaurant Load (1.0ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering restaurants/show.html.erb within layouts/application
  Rendered restaurants/show.html.erb within layouts/application (1.0ms)
Completed 200 OK in 157ms (Views: 132.7ms | ActiveRecord: 2.0ms)


Started GET "/restaurants" for 127.0.0.1 at 2017-11-03 19:24:41 +0300
Processing by RestaurantsController#index as HTML
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  Rendered restaurants/index.html.erb within layouts/application (6.0ms)
Completed 200 OK in 108ms (Views: 112.6ms | ActiveRecord: 0.0ms)


Started GET "/restaurants/1" for 127.0.0.1 at 2017-11-03 19:24:43 +0300
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mRestaurant Load (0.0ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendering restaurants/show.html.erb within layouts/application
  Rendered restaurants/show.html.erb within layouts/application (1.0ms)
Completed 200 OK in 125ms (Views: 115.7ms | ActiveRecord: 0.0ms)


Started GET "/restaurants/1/tables/new" for 127.0.0.1 at 2017-11-03 19:24:45 +0300
Processing by TablesController#new as HTML
  Parameters: {"restaurant_id"=>"1"}
  [1m[36mRestaurant Load (0.0ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.0ms)


  
NoMethodError (undefined method `tables' for #<Restaurant:0xc575d30>):
  
app/controllers/tables_controller.rb:18:in `new'
Started GET "/restaurants/1/tables/new" for 127.0.0.1 at 2017-11-03 19:26:21 +0300
Processing by TablesController#new as HTML
  Parameters: {"restaurant_id"=>"1"}
  [1m[36mRestaurant Load (1.0ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendering tables/new.html.erb within layouts/application
  Rendered tables/_form.html.erb (10.6ms)
  Rendered tables/new.html.erb within layouts/application (17.1ms)
Completed 200 OK in 206ms (Views: 121.0ms | ActiveRecord: 11.1ms)


Started POST "/restaurants/1/tables" for 127.0.0.1 at 2017-11-03 19:26:28 +0300
Processing by TablesController#create as HTML
  Parameters: {"utf8"=>"‚úì", "authenticity_token"=>"6zNSRzq52XIH59+qdl5XUbGpSBOhCHc7ZB1eZpGqnbvPKnYdpKUPgMX3HzfHMMYjwFDnHPTCsnxV5jjQjfObiA==", "table"=>{"restaurant_id"=>"1", "number_table"=>"1"}, "commit"=>"Create Table", "restaurant_id"=>"1"}
  [1m[36mRestaurant Load (0.5ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTable Exists (3.0ms)[0m  [1m[34mSELECT  1 AS one FROM "tables" WHERE "tables"."number_table" = $1 AND "tables"."restaurant_id" = $2 LIMIT $3[0m  [["number_table", 1], ["restaurant_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (2.0ms)[0m  [1m[32mINSERT INTO "tables" ("restaurant_id", "number_table", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["restaurant_id", 1], ["number_table", 1], ["created_at", "2017-11-03 16:26:28.739718"], ["updated_at", "2017-11-03 16:26:28.739718"]]
  [1m[35m (4.8ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/restaurants/1/tables
Completed 302 Found in 33ms (ActiveRecord: 10.3ms)


Started GET "/restaurants/1/tables" for 127.0.0.1 at 2017-11-03 19:26:28 +0300
Processing by TablesController#index as HTML
  Parameters: {"restaurant_id"=>"1"}
  [1m[36mRestaurant Load (0.0ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendering tables/index.html.erb within layouts/application
  [1m[36mTable Load (2.0ms)[0m  [1m[34mSELECT "tables".* FROM "tables" WHERE "tables"."restaurant_id" = $1[0m  [["restaurant_id", 1]]
  Rendered tables/index.html.erb within layouts/application (6.0ms)
Completed 200 OK in 134ms (Views: 116.9ms | ActiveRecord: 2.0ms)


Started GET "/restaurants/1/tables/new" for 127.0.0.1 at 2017-11-03 19:26:30 +0300
Processing by TablesController#new as HTML
  Parameters: {"restaurant_id"=>"1"}
  [1m[36mRestaurant Load (0.0ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendering tables/new.html.erb within layouts/application
  Rendered tables/_form.html.erb (4.0ms)
  Rendered tables/new.html.erb within layouts/application (11.5ms)
Completed 200 OK in 105ms (Views: 107.9ms | ActiveRecord: 0.0ms)


Started POST "/restaurants/1/tables" for 127.0.0.1 at 2017-11-03 19:26:34 +0300
Processing by TablesController#create as HTML
  Parameters: {"utf8"=>"‚úì", "authenticity_token"=>"feUTra1YiovbK0Oitx/7ZaHj6Rvj+GsJJK1kLwAowg2TK/fg5MSB+VWzs+Cd9pZmWn9nZAc+CGeI6TcIkmBecA==", "table"=>{"restaurant_id"=>"1", "number_table"=>"2"}, "commit"=>"Create Table", "restaurant_id"=>"1"}
  [1m[36mRestaurant Load (1.0ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTable Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "tables" WHERE "tables"."number_table" = $1 AND "tables"."restaurant_id" = $2 LIMIT $3[0m  [["number_table", 2], ["restaurant_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "tables" ("restaurant_id", "number_table", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["restaurant_id", 1], ["number_table", 2], ["created_at", "2017-11-03 16:26:34.407919"], ["updated_at", "2017-11-03 16:26:34.407919"]]
  [1m[35m (5.0ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/restaurants/1/tables
Completed 302 Found in 22ms (ActiveRecord: 8.1ms)


Started GET "/restaurants/1/tables" for 127.0.0.1 at 2017-11-03 19:26:34 +0300
Processing by TablesController#index as HTML
  Parameters: {"restaurant_id"=>"1"}
  [1m[36mRestaurant Load (1.0ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendering tables/index.html.erb within layouts/application
  [1m[36mTable Load (0.0ms)[0m  [1m[34mSELECT "tables".* FROM "tables" WHERE "tables"."restaurant_id" = $1[0m  [["restaurant_id", 1]]
  Rendered tables/index.html.erb within layouts/application (6.0ms)
Completed 200 OK in 122ms (Views: 110.8ms | ActiveRecord: 1.0ms)


Started GET "/restaurants/1/tables/1" for 127.0.0.1 at 2017-11-03 19:27:02 +0300
Processing by TablesController#show as HTML
  Parameters: {"restaurant_id"=>"1", "id"=>"1"}
  [1m[36mRestaurant Load (1.0ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTable Load (1.0ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" WHERE "tables"."restaurant_id" = $1 AND "tables"."id" = $2 LIMIT $3[0m  [["restaurant_id", 1], ["id", 1], ["LIMIT", 1]]
  Rendering tables/show.html.erb within layouts/application
  Rendered tables/show.html.erb within layouts/application (2.0ms)
Completed 200 OK in 126ms (Views: 114.7ms | ActiveRecord: 2.0ms)


Started GET "/restaurants/1/tables/1/reservations/new" for 127.0.0.1 at 2017-11-03 19:27:26 +0300
Processing by ReservationsController#new as HTML
  Parameters: {"restaurant_id"=>"1", "table_id"=>"1"}
  Rendering reservations/new.html.erb within layouts/application
  Rendered reservations/_form.html.erb (161.0ms)
  Rendered reservations/new.html.erb within layouts/application (168.1ms)
Completed 500 Internal Server Error in 232ms (ActiveRecord: 15.6ms)


  
ActionView::Template::Error (undefined method `reservations_path' for #<#<Class:0xab9fde0>:0xab9ec58>
Did you mean?  resolve_asset_path):
    1: <%= simple_form_for(@reservation) do |f| %>
    2:   <%= f.error_notification %>
    3: 
    4:   <div class="form-inputs">
  
app/views/reservations/_form.html.erb:1:in `_app_views_reservations__form_html_erb___214177779_90025740'
app/views/reservations/new.html.erb:3:in `_app_views_reservations_new_html_erb___998972816_90415536'
Started GET "/restaurants/1/tables/1/reservations/new" for 127.0.0.1 at 2017-11-03 19:46:03 +0300
  [1m[35m (3.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by ReservationsController#new as HTML
  Parameters: {"restaurant_id"=>"1", "table_id"=>"1"}
  [1m[36mRestaurant Load (2.0ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTable Load (2.0ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" WHERE "tables"."restaurant_id" = $1 AND "tables"."id" = $2 LIMIT $3[0m  [["restaurant_id", 1], ["id", 1], ["LIMIT", 1]]
  Rendering reservations/new.html.erb within layouts/application
  Rendered reservations/_form.html.erb (179.5ms)
  Rendered reservations/new.html.erb within layouts/application (190.0ms)
Completed 200 OK in 1047ms (Views: 847.7ms | ActiveRecord: 16.0ms)


Started POST "/restaurants/1/tables/1/reservations" for 127.0.0.1 at 2017-11-03 19:46:42 +0300
Processing by ReservationsController#create as HTML
  Parameters: {"utf8"=>"‚úì", "authenticity_token"=>"B8QoiiSD9XMODRB4ova/ltNsdimvkh40pgioOecvUJwj3QzQup8jgcwd0OUTmC7kopXZJvpY23OX886P+3ZWrw==", "reservation"=>{"table_id"=>"1", "starts_at(1i)"=>"2017", "starts_at(2i)"=>"11", "starts_at(3i)"=>"3", "starts_at(4i)"=>"10", "starts_at(5i)"=>"00", "ends_at(1i)"=>"2017", "ends_at(2i)"=>"11", "ends_at(3i)"=>"3", "ends_at(4i)"=>"11", "ends_at(5i)"=>"00", "visitor_attributes"=>{"name"=>"Mark", "phone"=>"+380732172199", "note"=>"", "number_persons"=>"2"}}, "commit"=>"Create Reservation", "restaurant_id"=>"1", "table_id"=>"1"}
  [1m[36mRestaurant Load (1.0ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTable Load (2.0ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" WHERE "tables"."restaurant_id" = $1 AND "tables"."id" = $2 LIMIT $3[0m  [["restaurant_id", 1], ["id", 1], ["LIMIT", 1]]
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mReservation Exists (3.0ms)[0m  [1m[34mSELECT  1 AS one FROM "reservations" WHERE ((reservations.ends_at IS NULL OR reservations.ends_at > '2017-11-03 10:00:00') AND (reservations.starts_at IS NULL OR reservations.starts_at < '2017-11-03 11:00:00') AND reservations.table_id  = 1) LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (2.0ms)[0m  [1m[32mINSERT INTO "reservations" ("table_id", "starts_at", "ends_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["table_id", 1], ["starts_at", "2017-11-03 10:00:00"], ["ends_at", "2017-11-03 11:00:00"], ["created_at", "2017-11-03 16:46:42.686079"], ["updated_at", "2017-11-03 16:46:42.686079"]]
  [1m[35mSQL (3.0ms)[0m  [1m[32mINSERT INTO "visitors" ("reservation_id", "name", "phone", "note", "number_persons", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["reservation_id", 1], ["name", "Mark"], ["phone", "+380732172199"], ["note", ""], ["number_persons", 2], ["created_at", "2017-11-03 16:46:42.693064"], ["updated_at", "2017-11-03 16:46:42.693064"]]
  [1m[35m (5.0ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/restaurants/1/tables/1/reservations/1
Completed 302 Found in 126ms (ActiveRecord: 24.0ms)


Started GET "/restaurants/1/tables/1/reservations/1" for 127.0.0.1 at 2017-11-03 19:46:42 +0300
Processing by ReservationsController#show as HTML
  Parameters: {"restaurant_id"=>"1", "table_id"=>"1", "id"=>"1"}
  [1m[36mRestaurant Load (1.0ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTable Load (1.0ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" WHERE "tables"."restaurant_id" = $1 AND "tables"."id" = $2 LIMIT $3[0m  [["restaurant_id", 1], ["id", 1], ["LIMIT", 1]]
  [1m[36mReservation Load (1.0ms)[0m  [1m[34mSELECT  "reservations".* FROM "reservations" WHERE "reservations"."table_id" = $1 AND "reservations"."id" = $2 LIMIT $3[0m  [["table_id", 1], ["id", 1], ["LIMIT", 1]]
  Rendering reservations/show.html.erb within layouts/application
  [1m[36mVisitor Load (1.0ms)[0m  [1m[34mSELECT  "visitors".* FROM "visitors" WHERE "visitors"."reservation_id" = $1 LIMIT $2[0m  [["reservation_id", 1], ["LIMIT", 1]]
  Rendered reservations/show.html.erb within layouts/application (7.2ms)
Completed 200 OK in 152ms (Views: 131.3ms | ActiveRecord: 4.0ms)


Started GET "/restaurants/1/tables/1/reservations/1/edit" for 127.0.0.1 at 2017-11-03 19:46:50 +0300
Processing by ReservationsController#edit as HTML
  Parameters: {"restaurant_id"=>"1", "table_id"=>"1", "id"=>"1"}
  [1m[36mRestaurant Load (0.0ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTable Load (1.0ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" WHERE "tables"."restaurant_id" = $1 AND "tables"."id" = $2 LIMIT $3[0m  [["restaurant_id", 1], ["id", 1], ["LIMIT", 1]]
  [1m[36mReservation Load (0.0ms)[0m  [1m[34mSELECT  "reservations".* FROM "reservations" WHERE "reservations"."table_id" = $1 AND "reservations"."id" = $2 LIMIT $3[0m  [["table_id", 1], ["id", 1], ["LIMIT", 1]]
  Rendering reservations/edit.html.erb within layouts/application
  [1m[36mVisitor Load (0.0ms)[0m  [1m[34mSELECT  "visitors".* FROM "visitors" WHERE "visitors"."reservation_id" = $1 LIMIT $2[0m  [["reservation_id", 1], ["LIMIT", 1]]
  Rendered reservations/_form.html.erb (19.0ms)
  Rendered reservations/edit.html.erb within layouts/application (25.5ms)
Completed 200 OK in 136ms (Views: 119.0ms | ActiveRecord: 1.0ms)


Started PATCH "/restaurants/1/tables/1/reservations/1" for 127.0.0.1 at 2017-11-03 19:48:40 +0300
Processing by ReservationsController#update as HTML
  Parameters: {"utf8"=>"‚úì", "authenticity_token"=>"wIOkVe9nkR0+7l/+7SZ1dc/EsVGWXayQVH8CKvpwnw5p7NhfDBua4kPpxz+GN+mEmwKC+4+XgZN5LTJoKw9aIA==", "reservation"=>{"table_id"=>"1", "starts_at(1i)"=>"2017", "starts_at(2i)"=>"11", "starts_at(3i)"=>"3", "starts_at(4i)"=>"10", "starts_at(5i)"=>"00", "ends_at(1i)"=>"2017", "ends_at(2i)"=>"11", "ends_at(3i)"=>"3", "ends_at(4i)"=>"11", "ends_at(5i)"=>"00", "visitor_attributes"=>{"id"=>"1", "name"=>"Mark", "phone"=>"+380732172199", "note"=>"Please prepare the best musicians", "number_persons"=>"2"}}, "commit"=>"Update Reservation", "restaurant_id"=>"1", "table_id"=>"1", "id"=>"1"}
  [1m[36mRestaurant Load (1.0ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTable Load (1.0ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" WHERE "tables"."restaurant_id" = $1 AND "tables"."id" = $2 LIMIT $3[0m  [["restaurant_id", 1], ["id", 1], ["LIMIT", 1]]
  [1m[36mReservation Load (2.0ms)[0m  [1m[34mSELECT  "reservations".* FROM "reservations" WHERE "reservations"."table_id" = $1 AND "reservations"."id" = $2 LIMIT $3[0m  [["table_id", 1], ["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVisitor Load (1.0ms)[0m  [1m[34mSELECT  "visitors".* FROM "visitors" WHERE "visitors"."reservation_id" = $1 LIMIT $2[0m  [["reservation_id", 1], ["LIMIT", 1]]
  [1m[36mReservation Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "reservations" WHERE ((reservations.ends_at IS NULL OR reservations.ends_at > '2017-11-03 10:00:00') AND (reservations.starts_at IS NULL OR reservations.starts_at < '2017-11-03 11:00:00') AND reservations.id !=1 AND reservations.table_id  = 1) LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (1.0ms)[0m  [1m[33mUPDATE "visitors" SET "note" = $1, "updated_at" = $2 WHERE "visitors"."id" = $3[0m  [["note", "Please prepare the best musicians"], ["updated_at", "2017-11-03 16:48:40.910338"], ["id", 1]]
  [1m[35m (14.8ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/restaurants/1/tables/1/reservations/1
Completed 302 Found in 42ms (ActiveRecord: 21.7ms)


Started GET "/restaurants/1/tables/1/reservations/1" for 127.0.0.1 at 2017-11-03 19:48:40 +0300
Processing by ReservationsController#show as HTML
  Parameters: {"restaurant_id"=>"1", "table_id"=>"1", "id"=>"1"}
  [1m[36mRestaurant Load (0.5ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTable Load (0.5ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" WHERE "tables"."restaurant_id" = $1 AND "tables"."id" = $2 LIMIT $3[0m  [["restaurant_id", 1], ["id", 1], ["LIMIT", 1]]
  [1m[36mReservation Load (0.4ms)[0m  [1m[34mSELECT  "reservations".* FROM "reservations" WHERE "reservations"."table_id" = $1 AND "reservations"."id" = $2 LIMIT $3[0m  [["table_id", 1], ["id", 1], ["LIMIT", 1]]
  Rendering reservations/show.html.erb within layouts/application
  [1m[36mVisitor Load (0.0ms)[0m  [1m[34mSELECT  "visitors".* FROM "visitors" WHERE "visitors"."reservation_id" = $1 LIMIT $2[0m  [["reservation_id", 1], ["LIMIT", 1]]
  Rendered reservations/show.html.erb within layouts/application (4.0ms)
Completed 200 OK in 125ms (Views: 107.1ms | ActiveRecord: 1.4ms)


Started GET "/restaurants/1/tables/1/reservations" for 127.0.0.1 at 2017-11-03 19:48:45 +0300
Processing by ReservationsController#index as HTML
  Parameters: {"restaurant_id"=>"1", "table_id"=>"1"}
  [1m[36mRestaurant Load (0.0ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTable Load (0.0ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" WHERE "tables"."restaurant_id" = $1 AND "tables"."id" = $2 LIMIT $3[0m  [["restaurant_id", 1], ["id", 1], ["LIMIT", 1]]
  Rendering reservations/index.html.erb within layouts/application
  [1m[36mReservation Load (15.7ms)[0m  [1m[34mSELECT "reservations".* FROM "reservations" WHERE "reservations"."table_id" = $1 ORDER BY "reservations"."started_at" ASC[0m  [["table_id", 1]]
  Rendered reservations/index.html.erb within layouts/application (31.3ms)
Completed 500 Internal Server Error in 50ms (ActiveRecord: 15.7ms)


  
ActionView::Template::Error (PG::UndefinedColumn: –û–®–ò–ë–ö–ê:  —Å—Ç–æ–ª–±–µ—Ü reservations.started_at –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
LINE 1: ...ns" WHERE "reservations"."table_id" = $1 ORDER BY "reservati...
                                                             ^
HINT:  –í–æ–∑–º–æ–∂–Ω–æ, –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–ª–∞—Å—å —Å—Å—ã–ª–∫–∞ –Ω–∞ —Å—Ç–æ–ª–±–µ—Ü "reservations.starts_at".
: SELECT "reservations".* FROM "reservations" WHERE "reservations"."table_id" = $1 ORDER BY "reservations"."started_at" ASC):
    14:   </thead>
    15: 
    16:   <tbody>
    17:   <% @reservations.each do |reservation| %>
    18:       <tr>
    19:         <td><%= reservation.starts_at %></td>
    20:         <td><%= reservation.ends_at %></td>
  
app/views/reservations/index.html.erb:17:in `_app_views_reservations_index_html_erb__201015344_94718736'
Started GET "/restaurants/1/tables/1/reservations" for 127.0.0.1 at 2017-11-03 19:49:18 +0300
Processing by ReservationsController#index as HTML
  Parameters: {"restaurant_id"=>"1", "table_id"=>"1"}
  [1m[36mRestaurant Load (0.0ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTable Load (0.0ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" WHERE "tables"."restaurant_id" = $1 AND "tables"."id" = $2 LIMIT $3[0m  [["restaurant_id", 1], ["id", 1], ["LIMIT", 1]]
  Rendering reservations/index.html.erb within layouts/application
  [1m[36mReservation Load (1.0ms)[0m  [1m[34mSELECT "reservations".* FROM "reservations" WHERE "reservations"."table_id" = $1 ORDER BY "reservations"."starts_at" ASC[0m  [["table_id", 1]]
  Rendered reservations/index.html.erb within layouts/application (18.1ms)
Completed 200 OK in 262ms (Views: 179.2ms | ActiveRecord: 1.0ms)


Started GET "/restaurants/1/tables/1/reservations/new" for 127.0.0.1 at 2017-11-03 19:49:23 +0300
Processing by ReservationsController#new as HTML
  Parameters: {"restaurant_id"=>"1", "table_id"=>"1"}
  [1m[36mRestaurant Load (0.0ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTable Load (0.5ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" WHERE "tables"."restaurant_id" = $1 AND "tables"."id" = $2 LIMIT $3[0m  [["restaurant_id", 1], ["id", 1], ["LIMIT", 1]]
  Rendering reservations/new.html.erb within layouts/application
  Rendered reservations/_form.html.erb (15.6ms)
  Rendered reservations/new.html.erb within layouts/application (31.3ms)
Completed 200 OK in 188ms (Views: 142.6ms | ActiveRecord: 13.5ms)


Started POST "/restaurants/1/tables/1/reservations" for 127.0.0.1 at 2017-11-03 19:49:41 +0300
Processing by ReservationsController#create as HTML
  Parameters: {"utf8"=>"‚úì", "authenticity_token"=>"piSStj5Z7KCmCPP5TA2EE909dxQXvCSdXS/rwfHzI9i1DxxUV0nQg+FTgmxeMEC1dW8jLbUDYYS0JhHUZ0hCkg==", "reservation"=>{"table_id"=>"1", "starts_at(1i)"=>"2017", "starts_at(2i)"=>"11", "starts_at(3i)"=>"3", "starts_at(4i)"=>"10", "starts_at(5i)"=>"00", "ends_at(1i)"=>"2017", "ends_at(2i)"=>"11", "ends_at(3i)"=>"3", "ends_at(4i)"=>"16", "ends_at(5i)"=>"00", "visitor_attributes"=>{"name"=>"Kate", "phone"=>"+380732172199", "note"=>"", "number_persons"=>"4"}}, "commit"=>"Create Reservation", "restaurant_id"=>"1", "table_id"=>"1"}
  [1m[36mRestaurant Load (3.0ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTable Load (1.0ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" WHERE "tables"."restaurant_id" = $1 AND "tables"."id" = $2 LIMIT $3[0m  [["restaurant_id", 1], ["id", 1], ["LIMIT", 1]]
  [1m[35m (2.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mReservation Exists (3.0ms)[0m  [1m[34mSELECT  1 AS one FROM "reservations" WHERE ((reservations.ends_at IS NULL OR reservations.ends_at > '2017-11-03 10:00:00') AND (reservations.starts_at IS NULL OR reservations.starts_at < '2017-11-03 16:00:00') AND reservations.table_id  = 1) LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK[0m
  Rendering reservations/new.html.erb within layouts/application
  Rendered reservations/_form.html.erb (18.0ms)
  Rendered reservations/new.html.erb within layouts/application (25.1ms)
Completed 200 OK in 235ms (Views: 177.4ms | ActiveRecord: 10.0ms)


Started POST "/restaurants/1/tables/1/reservations" for 127.0.0.1 at 2017-11-03 19:49:56 +0300
Processing by ReservationsController#create as HTML
  Parameters: {"utf8"=>"‚úì", "authenticity_token"=>"wZrYGOMOcyRB7Gr8W0xFc3HXub6Uzb7SiEUEmyIDWATlg/xCfRKl1oP8qmHqItQBAC4WscEHe5W5vmItPlpeNw==", "reservation"=>{"table_id"=>"1", "starts_at(1i)"=>"2017", "starts_at(2i)"=>"11", "starts_at(3i)"=>"3", "starts_at(4i)"=>"11", "starts_at(5i)"=>"00", "ends_at(1i)"=>"2017", "ends_at(2i)"=>"11", "ends_at(3i)"=>"3", "ends_at(4i)"=>"16", "ends_at(5i)"=>"00", "visitor_attributes"=>{"name"=>"Kate", "phone"=>"+380732172199", "note"=>"", "number_persons"=>"4"}}, "commit"=>"Create Reservation", "restaurant_id"=>"1", "table_id"=>"1"}
  [1m[36mRestaurant Load (0.0ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTable Load (0.5ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" WHERE "tables"."restaurant_id" = $1 AND "tables"."id" = $2 LIMIT $3[0m  [["restaurant_id", 1], ["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mReservation Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "reservations" WHERE ((reservations.ends_at IS NULL OR reservations.ends_at > '2017-11-03 11:00:00') AND (reservations.starts_at IS NULL OR reservations.starts_at < '2017-11-03 16:00:00') AND reservations.table_id  = 1) LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (3.0ms)[0m  [1m[32mINSERT INTO "reservations" ("table_id", "starts_at", "ends_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["table_id", 1], ["starts_at", "2017-11-03 11:00:00"], ["ends_at", "2017-11-03 16:00:00"], ["created_at", "2017-11-03 16:49:56.874485"], ["updated_at", "2017-11-03 16:49:56.874485"]]
  [1m[35mSQL (4.0ms)[0m  [1m[32mINSERT INTO "visitors" ("reservation_id", "name", "phone", "note", "number_persons", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["reservation_id", 2], ["name", "Kate"], ["phone", "+380732172199"], ["note", ""], ["number_persons", 4], ["created_at", "2017-11-03 16:49:56.890528"], ["updated_at", "2017-11-03 16:49:56.890528"]]
  [1m[35m (8.0ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/restaurants/1/tables/1/reservations/2
Completed 302 Found in 60ms (ActiveRecord: 16.6ms)


Started GET "/restaurants/1/tables/1/reservations/2" for 127.0.0.1 at 2017-11-03 19:49:56 +0300
Processing by ReservationsController#show as HTML
  Parameters: {"restaurant_id"=>"1", "table_id"=>"1", "id"=>"2"}
  [1m[36mRestaurant Load (1.0ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTable Load (1.0ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" WHERE "tables"."restaurant_id" = $1 AND "tables"."id" = $2 LIMIT $3[0m  [["restaurant_id", 1], ["id", 1], ["LIMIT", 1]]
  [1m[36mReservation Load (0.0ms)[0m  [1m[34mSELECT  "reservations".* FROM "reservations" WHERE "reservations"."table_id" = $1 AND "reservations"."id" = $2 LIMIT $3[0m  [["table_id", 1], ["id", 2], ["LIMIT", 1]]
  Rendering reservations/show.html.erb within layouts/application
  [1m[36mVisitor Load (0.0ms)[0m  [1m[34mSELECT  "visitors".* FROM "visitors" WHERE "visitors"."reservation_id" = $1 LIMIT $2[0m  [["reservation_id", 2], ["LIMIT", 1]]
  Rendered reservations/show.html.erb within layouts/application (7.1ms)
Completed 200 OK in 151ms (Views: 129.6ms | ActiveRecord: 2.0ms)


Started GET "/restaurants/1/tables/1/reservations" for 127.0.0.1 at 2017-11-03 19:50:01 +0300
Processing by ReservationsController#index as HTML
  Parameters: {"restaurant_id"=>"1", "table_id"=>"1"}
  [1m[36mRestaurant Load (0.0ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTable Load (0.0ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" WHERE "tables"."restaurant_id" = $1 AND "tables"."id" = $2 LIMIT $3[0m  [["restaurant_id", 1], ["id", 1], ["LIMIT", 1]]
  Rendering reservations/index.html.erb within layouts/application
  [1m[36mReservation Load (1.0ms)[0m  [1m[34mSELECT "reservations".* FROM "reservations" WHERE "reservations"."table_id" = $1 ORDER BY "reservations"."starts_at" ASC[0m  [["table_id", 1]]
  Rendered reservations/index.html.erb within layouts/application (5.0ms)
Completed 200 OK in 157ms (Views: 140.2ms | ActiveRecord: 1.0ms)


Started GET "/restaurants/1/tables/1/reservations/new" for 127.0.0.1 at 2017-11-03 19:50:06 +0300
Processing by ReservationsController#new as HTML
  Parameters: {"restaurant_id"=>"1", "table_id"=>"1"}
  [1m[36mRestaurant Load (1.0ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTable Load (1.0ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" WHERE "tables"."restaurant_id" = $1 AND "tables"."id" = $2 LIMIT $3[0m  [["restaurant_id", 1], ["id", 1], ["LIMIT", 1]]
  Rendering reservations/new.html.erb within layouts/application
  Rendered reservations/_form.html.erb (28.2ms)
  Rendered reservations/new.html.erb within layouts/application (28.2ms)
Completed 200 OK in 192ms (Views: 167.8ms | ActiveRecord: 2.0ms)


Started POST "/restaurants/1/tables/1/reservations" for 127.0.0.1 at 2017-11-03 19:50:19 +0300
Processing by ReservationsController#create as HTML
  Parameters: {"utf8"=>"‚úì", "authenticity_token"=>"oHUq6S+0FAv/qIZpdI4Fd/c6cj2asMn9eCZwEcBli/mzXqQLRqQoKLjz9/xms8HRX2gmBDgPjOSRL4oEVt7qsw==", "reservation"=>{"table_id"=>"1", "starts_at(1i)"=>"2017", "starts_at(2i)"=>"11", "starts_at(3i)"=>"3", "starts_at(4i)"=>"16", "starts_at(5i)"=>"00", "ends_at(1i)"=>"2017", "ends_at(2i)"=>"11", "ends_at(3i)"=>"4", "ends_at(4i)"=>"16", "ends_at(5i)"=>"00", "visitor_attributes"=>{"name"=>"", "phone"=>"", "note"=>"", "number_persons"=>""}}, "commit"=>"Create Reservation", "restaurant_id"=>"1", "table_id"=>"1"}
  [1m[36mRestaurant Load (0.0ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTable Load (1.0ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" WHERE "tables"."restaurant_id" = $1 AND "tables"."id" = $2 LIMIT $3[0m  [["restaurant_id", 1], ["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mReservation Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "reservations" WHERE ((reservations.ends_at IS NULL OR reservations.ends_at > '2017-11-03 16:00:00') AND (reservations.starts_at IS NULL OR reservations.starts_at < '2017-11-04 16:00:00') AND reservations.table_id  = 1) LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK[0m
  Rendering reservations/new.html.erb within layouts/application
  Rendered reservations/_form.html.erb (30.1ms)
  Rendered reservations/new.html.erb within layouts/application (37.1ms)
Completed 200 OK in 225ms (Views: 175.2ms | ActiveRecord: 3.0ms)


Started POST "/restaurants/1/tables/1/reservations" for 127.0.0.1 at 2017-11-03 19:50:32 +0300
Processing by ReservationsController#create as HTML
  Parameters: {"utf8"=>"‚úì", "authenticity_token"=>"ua/tu5LDqWQOKWK5c7wg+fwxBNreTkK+wSh61WvWf1+dtsnhDN9/lsw5oiTC0rGLjcir1YuEh/nw0xxjd495bA==", "reservation"=>{"table_id"=>"1", "starts_at(1i)"=>"2017", "starts_at(2i)"=>"11", "starts_at(3i)"=>"3", "starts_at(4i)"=>"16", "starts_at(5i)"=>"00", "ends_at(1i)"=>"2017", "ends_at(2i)"=>"11", "ends_at(3i)"=>"3", "ends_at(4i)"=>"23", "ends_at(5i)"=>"00", "visitor_attributes"=>{"name"=>"", "phone"=>"", "note"=>"", "number_persons"=>""}}, "commit"=>"Create Reservation", "restaurant_id"=>"1", "table_id"=>"1"}
  [1m[36mRestaurant Load (0.0ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTable Load (0.0ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" WHERE "tables"."restaurant_id" = $1 AND "tables"."id" = $2 LIMIT $3[0m  [["restaurant_id", 1], ["id", 1], ["LIMIT", 1]]
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mReservation Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "reservations" WHERE ((reservations.ends_at IS NULL OR reservations.ends_at > '2017-11-03 16:00:00') AND (reservations.starts_at IS NULL OR reservations.starts_at < '2017-11-03 23:00:00') AND reservations.table_id  = 1) LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK[0m
  Rendering reservations/new.html.erb within layouts/application
  Rendered reservations/_form.html.erb (20.2ms)
  Rendered reservations/new.html.erb within layouts/application (33.7ms)
Completed 200 OK in 211ms (Views: 185.7ms | ActiveRecord: 2.0ms)


Started POST "/restaurants/1/tables/1/reservations" for 127.0.0.1 at 2017-11-03 19:51:18 +0300
Processing by ReservationsController#create as HTML
  Parameters: {"utf8"=>"‚úì", "authenticity_token"=>"9OAHmT549mecrfIecxIYfYCYjriJ/r39MnW9kGq/043Q+SPDoGQglV69MoPCfIkP8WEht9w0eLoDjtsmdubVvg==", "reservation"=>{"table_id"=>"1", "starts_at(1i)"=>"2017", "starts_at(2i)"=>"11", "starts_at(3i)"=>"3", "starts_at(4i)"=>"16", "starts_at(5i)"=>"00", "ends_at(1i)"=>"2017", "ends_at(2i)"=>"11", "ends_at(3i)"=>"3", "ends_at(4i)"=>"23", "ends_at(5i)"=>"00", "visitor_attributes"=>{"name"=>"Philip", "phone"=>"+380732172199", "note"=>"", "number_persons"=>"3"}}, "commit"=>"Create Reservation", "restaurant_id"=>"1", "table_id"=>"1"}
  [1m[36mRestaurant Load (1.0ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTable Load (2.0ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" WHERE "tables"."restaurant_id" = $1 AND "tables"."id" = $2 LIMIT $3[0m  [["restaurant_id", 1], ["id", 1], ["LIMIT", 1]]
  [1m[35m (2.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mReservation Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "reservations" WHERE ((reservations.ends_at IS NULL OR reservations.ends_at > '2017-11-03 16:00:00') AND (reservations.starts_at IS NULL OR reservations.starts_at < '2017-11-03 23:00:00') AND reservations.table_id  = 1) LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "reservations" ("table_id", "starts_at", "ends_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["table_id", 1], ["starts_at", "2017-11-03 16:00:00"], ["ends_at", "2017-11-03 23:00:00"], ["created_at", "2017-11-03 16:51:18.510846"], ["updated_at", "2017-11-03 16:51:18.510846"]]
  [1m[35mSQL (2.0ms)[0m  [1m[32mINSERT INTO "visitors" ("reservation_id", "name", "phone", "note", "number_persons", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["reservation_id", 3], ["name", "Philip"], ["phone", "+380732172199"], ["note", ""], ["number_persons", 3], ["created_at", "2017-11-03 16:51:18.515821"], ["updated_at", "2017-11-03 16:51:18.515821"]]
  [1m[35m (5.8ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/restaurants/1/tables/1/reservations/3
Completed 302 Found in 92ms (ActiveRecord: 13.8ms)


Started GET "/restaurants/1/tables/1/reservations/3" for 127.0.0.1 at 2017-11-03 19:51:18 +0300
Processing by ReservationsController#show as HTML
  Parameters: {"restaurant_id"=>"1", "table_id"=>"1", "id"=>"3"}
  [1m[36mRestaurant Load (1.0ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTable Load (1.0ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" WHERE "tables"."restaurant_id" = $1 AND "tables"."id" = $2 LIMIT $3[0m  [["restaurant_id", 1], ["id", 1], ["LIMIT", 1]]
  [1m[36mReservation Load (1.0ms)[0m  [1m[34mSELECT  "reservations".* FROM "reservations" WHERE "reservations"."table_id" = $1 AND "reservations"."id" = $2 LIMIT $3[0m  [["table_id", 1], ["id", 3], ["LIMIT", 1]]
  Rendering reservations/show.html.erb within layouts/application
  [1m[36mVisitor Load (1.0ms)[0m  [1m[34mSELECT  "visitors".* FROM "visitors" WHERE "visitors"."reservation_id" = $1 LIMIT $2[0m  [["reservation_id", 3], ["LIMIT", 1]]
  Rendered reservations/show.html.erb within layouts/application (11.0ms)
Completed 200 OK in 194ms (Views: 161.0ms | ActiveRecord: 4.0ms)


Started GET "/restaurants/1/tables/1/reservations" for 127.0.0.1 at 2017-11-03 19:51:22 +0300
Processing by ReservationsController#index as HTML
  Parameters: {"restaurant_id"=>"1", "table_id"=>"1"}
  [1m[36mRestaurant Load (0.5ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTable Load (0.5ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" WHERE "tables"."restaurant_id" = $1 AND "tables"."id" = $2 LIMIT $3[0m  [["restaurant_id", 1], ["id", 1], ["LIMIT", 1]]
  Rendering reservations/index.html.erb within layouts/application
  [1m[36mReservation Load (1.0ms)[0m  [1m[34mSELECT "reservations".* FROM "reservations" WHERE "reservations"."table_id" = $1 ORDER BY "reservations"."starts_at" ASC[0m  [["table_id", 1]]
  Rendered reservations/index.html.erb within layouts/application (10.2ms)
Completed 200 OK in 137ms (Views: 117.9ms | ActiveRecord: 2.0ms)


Started GET "/restaurants" for 127.0.0.1 at 2017-11-03 19:51:30 +0300
Processing by RestaurantsController#index as HTML
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  Rendered restaurants/index.html.erb within layouts/application (0.0ms)
Completed 200 OK in 143ms (Views: 129.4ms | ActiveRecord: 0.0ms)


Started GET "/restaurants/2/edit" for 127.0.0.1 at 2017-11-03 19:54:48 +0300
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by RestaurantsController#edit as HTML
  Parameters: {"id"=>"2"}
  [1m[36mRestaurant Load (1.0ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering restaurants/edit.html.erb within layouts/application
  Rendered restaurants/_form.html.erb (115.1ms)
  Rendered restaurants/edit.html.erb within layouts/application (125.3ms)
Completed 200 OK in 712ms (Views: 658.0ms | ActiveRecord: 6.1ms)


Started PATCH "/restaurants/2" for 127.0.0.1 at 2017-11-03 19:55:16 +0300
Processing by RestaurantsController#update as HTML
  Parameters: {"utf8"=>"‚úì", "authenticity_token"=>"VICxgTYm3QJ9GNogcY2EylaAoS12NxJFvj5+RghsKSSqf6L/YtCyB3g1Z2G7NFENxkjb5ODgnvUjTx5AKe1h0Q==", "restaurant"=>{"name"=>"Grill Do Brasil", "address"=>"–£–∫—Ä–∞–∏–Ω–∞, –ö–∏–µ–≤, –±—É–ª. –õ–µ—Å–∏ –£–∫—Ä–∞–∏–Ω–∫–∏, 24", "subway"=>"–ü–µ—á–µ—Ä—Å–∫–∞—è", "opened_at(1i)"=>"2000", "opened_at(2i)"=>"1", "opened_at(3i)"=>"1", "opened_at(4i)"=>"00", "opened_at(5i)"=>"00", "closed_at(1i)"=>"2000", "closed_at(2i)"=>"1", "closed_at(3i)"=>"1", "closed_at(4i)"=>"23", "closed_at(5i)"=>"59"}, "commit"=>"Update Restaurant", "id"=>"2"}
  [1m[36mRestaurant Load (1.0ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRestaurant Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "restaurants" WHERE "restaurants"."name" = $1 AND ("restaurants"."id" != $2) AND "restaurants"."address" = $3 LIMIT $4[0m  [["name", "Grill Do Brasil"], ["id", 2], ["address", "–£–∫—Ä–∞–∏–Ω–∞, –ö–∏–µ–≤, –±—É–ª. –õ–µ—Å–∏ –£–∫—Ä–∞–∏–Ω–∫–∏, 24"], ["LIMIT", 1]]
  [1m[35mSQL (0.0ms)[0m  [1m[33mUPDATE "restaurants" SET "opened_at" = $1, "closed_at" = $2, "updated_at" = $3 WHERE "restaurants"."id" = $4[0m  [["opened_at", "00:00:00"], ["closed_at", "23:59:00"], ["updated_at", "2017-11-03 16:55:17.103378"], ["id", 2]]
  [1m[35m (4.3ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/restaurants/2
Completed 302 Found in 122ms (ActiveRecord: 15.4ms)


Started GET "/restaurants/2" for 127.0.0.1 at 2017-11-03 19:55:17 +0300
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mRestaurant Load (0.5ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering restaurants/show.html.erb within layouts/application
  Rendered restaurants/show.html.erb within layouts/application (2.0ms)
Completed 200 OK in 146ms (Views: 134.5ms | ActiveRecord: 1.2ms)


Started GET "/restaurants/2/tables" for 127.0.0.1 at 2017-11-03 19:55:29 +0300
Processing by TablesController#index as HTML
  Parameters: {"restaurant_id"=>"2"}
  [1m[36mRestaurant Load (0.0ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering tables/index.html.erb within layouts/application
  [1m[36mTable Load (1.0ms)[0m  [1m[34mSELECT "tables".* FROM "tables" WHERE "tables"."restaurant_id" = $1[0m  [["restaurant_id", 2]]
  Rendered tables/index.html.erb within layouts/application (17.0ms)
Completed 200 OK in 145ms (Views: 106.4ms | ActiveRecord: 7.0ms)


Started GET "/restaurants/2/tables/new" for 127.0.0.1 at 2017-11-03 19:55:32 +0300
Processing by TablesController#new as HTML
  Parameters: {"restaurant_id"=>"2"}
  [1m[36mRestaurant Load (1.1ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering tables/new.html.erb within layouts/application
  Rendered tables/_form.html.erb (15.6ms)
  Rendered tables/new.html.erb within layouts/application (15.6ms)
Completed 200 OK in 141ms (Views: 112.0ms | ActiveRecord: 5.6ms)


Started POST "/restaurants/2/tables" for 127.0.0.1 at 2017-11-03 19:55:34 +0300
Processing by TablesController#create as HTML
  Parameters: {"utf8"=>"‚úì", "authenticity_token"=>"z1cac4sLAC/pDbQ8giUJiEL0v5rG7kxM5JeOVIK+rwPaHs6nolmdKW0lFov9Vh/af8VfFbV7RuZChL8r6GorYQ==", "table"=>{"restaurant_id"=>"2", "number_table"=>"1"}, "commit"=>"Create Table", "restaurant_id"=>"2"}
  [1m[36mRestaurant Load (2.0ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTable Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "tables" WHERE "tables"."number_table" = $1 AND "tables"."restaurant_id" = $2 LIMIT $3[0m  [["number_table", 1], ["restaurant_id", 2], ["LIMIT", 1]]
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "tables" ("restaurant_id", "number_table", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["restaurant_id", 2], ["number_table", 1], ["created_at", "2017-11-03 16:55:34.569491"], ["updated_at", "2017-11-03 16:55:34.569491"]]
  [1m[35m (6.2ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/restaurants/2/tables
Completed 302 Found in 27ms (ActiveRecord: 10.3ms)


Started GET "/restaurants/2/tables" for 127.0.0.1 at 2017-11-03 19:55:34 +0300
Processing by TablesController#index as HTML
  Parameters: {"restaurant_id"=>"2"}
  [1m[36mRestaurant Load (0.5ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering tables/index.html.erb within layouts/application
  [1m[36mTable Load (1.0ms)[0m  [1m[34mSELECT "tables".* FROM "tables" WHERE "tables"."restaurant_id" = $1[0m  [["restaurant_id", 2]]
  Rendered tables/index.html.erb within layouts/application (5.0ms)
Completed 200 OK in 121ms (Views: 110.7ms | ActiveRecord: 1.5ms)


Started GET "/restaurants/2/tables/3" for 127.0.0.1 at 2017-11-03 19:55:38 +0300
Processing by TablesController#show as HTML
  Parameters: {"restaurant_id"=>"2", "id"=>"3"}
  [1m[36mRestaurant Load (1.0ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTable Load (1.0ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" WHERE "tables"."restaurant_id" = $1 AND "tables"."id" = $2 LIMIT $3[0m  [["restaurant_id", 2], ["id", 3], ["LIMIT", 1]]
  Rendering tables/show.html.erb within layouts/application
  Rendered tables/show.html.erb within layouts/application (1.0ms)
Completed 200 OK in 114ms (Views: 99.8ms | ActiveRecord: 2.0ms)


Started GET "/restaurants/2/tables/3/reservations/new" for 127.0.0.1 at 2017-11-03 19:55:39 +0300
Processing by ReservationsController#new as HTML
  Parameters: {"restaurant_id"=>"2", "table_id"=>"3"}
  [1m[36mRestaurant Load (0.0ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTable Load (1.0ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" WHERE "tables"."restaurant_id" = $1 AND "tables"."id" = $2 LIMIT $3[0m  [["restaurant_id", 2], ["id", 3], ["LIMIT", 1]]
  Rendering reservations/new.html.erb within layouts/application
  Rendered reservations/_form.html.erb (22.1ms)
  Rendered reservations/new.html.erb within layouts/application (31.1ms)
Completed 200 OK in 189ms (Views: 141.8ms | ActiveRecord: 6.0ms)


Started POST "/restaurants/2/tables/3/reservations" for 127.0.0.1 at 2017-11-03 19:55:55 +0300
Processing by ReservationsController#create as HTML
  Parameters: {"utf8"=>"‚úì", "authenticity_token"=>"Y/dlLUNsnS2OdrE3Q3BYVS4dbmdQLN6E0bSSSMaEXqyEPYOoOVSPSIo6E5lT12hhuJI7HmPpvQxsz+pftQmYPQ==", "reservation"=>{"table_id"=>"3", "starts_at(1i)"=>"2017", "starts_at(2i)"=>"11", "starts_at(3i)"=>"3", "starts_at(4i)"=>"23", "starts_at(5i)"=>"00", "ends_at(1i)"=>"2017", "ends_at(2i)"=>"11", "ends_at(3i)"=>"4", "ends_at(4i)"=>"04", "ends_at(5i)"=>"00", "visitor_attributes"=>{"name"=>"", "phone"=>"", "note"=>"", "number_persons"=>""}}, "commit"=>"Create Reservation", "restaurant_id"=>"2", "table_id"=>"3"}
  [1m[36mRestaurant Load (0.0ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTable Load (0.0ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" WHERE "tables"."restaurant_id" = $1 AND "tables"."id" = $2 LIMIT $3[0m  [["restaurant_id", 2], ["id", 3], ["LIMIT", 1]]
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mReservation Exists (7.0ms)[0m  [1m[34mSELECT  1 AS one FROM "reservations" WHERE ((reservations.ends_at IS NULL OR reservations.ends_at > '2017-11-03 23:00:00') AND (reservations.starts_at IS NULL OR reservations.starts_at < '2017-11-04 04:00:00') AND reservations.table_id  = 3) LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK[0m
  Rendering reservations/new.html.erb within layouts/application
  Rendered reservations/_form.html.erb (25.1ms)
  Rendered reservations/new.html.erb within layouts/application (32.2ms)
Completed 200 OK in 195ms (Views: 166.6ms | ActiveRecord: 8.0ms)


Started POST "/restaurants/2/tables/3/reservations" for 127.0.0.1 at 2017-11-03 20:16:01 +0300
Processing by ReservationsController#create as HTML
  Parameters: {"utf8"=>"‚úì", "authenticity_token"=>"QjzxjgXDLWV2b0G5gkqWs20L6lW+PKuW0rs0R/cF5xtmJdXUm9/7l7R/gSQzJAfBHPJFWuv2btHjQFLx61zhKA==", "reservation"=>{"table_id"=>"3", "starts_at(1i)"=>"2017", "starts_at(2i)"=>"11", "starts_at(3i)"=>"3", "starts_at(4i)"=>"23", "starts_at(5i)"=>"00", "ends_at(1i)"=>"2017", "ends_at(2i)"=>"11", "ends_at(3i)"=>"4", "ends_at(4i)"=>"04", "ends_at(5i)"=>"00", "visitor_attributes"=>{"name"=>"", "phone"=>"", "note"=>"", "number_persons"=>""}}, "commit"=>"Create Reservation", "restaurant_id"=>"2", "table_id"=>"3"}
  [1m[36mRestaurant Load (1.0ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTable Load (2.3ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" WHERE "tables"."restaurant_id" = $1 AND "tables"."id" = $2 LIMIT $3[0m  [["restaurant_id", 2], ["id", 3], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK[0m
Completed 500 Internal Server Error in 94ms (ActiveRecord: 15.3ms)


  
ArgumentError (argument out of range):
  
app/models/reservation.rb:9:in `block in <class:Reservation>'
app/controllers/reservations_controller.rb:32:in `block in create'
app/controllers/reservations_controller.rb:31:in `create'
Started GET "/restaurants/2/tables/3/reservations" for 127.0.0.1 at 2017-11-03 20:18:12 +0300
Processing by ReservationsController#index as HTML
  Parameters: {"restaurant_id"=>"2", "table_id"=>"3"}
  [1m[36mRestaurant Load (1.0ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTable Load (1.0ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" WHERE "tables"."restaurant_id" = $1 AND "tables"."id" = $2 LIMIT $3[0m  [["restaurant_id", 2], ["id", 3], ["LIMIT", 1]]
  Rendering reservations/index.html.erb within layouts/application
  [1m[36mReservation Load (1.0ms)[0m  [1m[34mSELECT "reservations".* FROM "reservations" WHERE "reservations"."table_id" = $1 ORDER BY "reservations"."starts_at" ASC[0m  [["table_id", 3]]
  Rendered reservations/index.html.erb within layouts/application (3.0ms)
Completed 200 OK in 173ms (Views: 124.7ms | ActiveRecord: 2.9ms)


Started GET "/restaurants/2/tables/3/reservations/new" for 127.0.0.1 at 2017-11-03 20:18:18 +0300
Processing by ReservationsController#new as HTML
  Parameters: {"restaurant_id"=>"2", "table_id"=>"3"}
  [1m[36mRestaurant Load (1.0ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTable Load (1.0ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" WHERE "tables"."restaurant_id" = $1 AND "tables"."id" = $2 LIMIT $3[0m  [["restaurant_id", 2], ["id", 3], ["LIMIT", 1]]
  Rendering reservations/new.html.erb within layouts/application
  Rendered reservations/_form.html.erb (14.0ms)
  Rendered reservations/new.html.erb within layouts/application (21.6ms)
Completed 200 OK in 149ms (Views: 113.6ms | ActiveRecord: 8.1ms)


Started POST "/restaurants/2/tables/3/reservations" for 127.0.0.1 at 2017-11-03 20:18:27 +0300
Processing by ReservationsController#create as HTML
  Parameters: {"utf8"=>"‚úì", "authenticity_token"=>"KIGX1Gf5t4Z3NfQLwhT3mv54PiFOCijfSGeLkCoZt6vPS3FRHcGl43N5VqXSs8euaPdrWH3PS1f1HPOHWZRxOg==", "reservation"=>{"table_id"=>"3", "starts_at(1i)"=>"2017", "starts_at(2i)"=>"11", "starts_at(3i)"=>"3", "starts_at(4i)"=>"17", "starts_at(5i)"=>"00", "ends_at(1i)"=>"2017", "ends_at(2i)"=>"11", "ends_at(3i)"=>"3", "ends_at(4i)"=>"23", "ends_at(5i)"=>"00", "visitor_attributes"=>{"name"=>"", "phone"=>"", "note"=>"", "number_persons"=>""}}, "commit"=>"Create Reservation", "restaurant_id"=>"2", "table_id"=>"3"}
  [1m[36mRestaurant Load (1.0ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTable Load (0.0ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" WHERE "tables"."restaurant_id" = $1 AND "tables"."id" = $2 LIMIT $3[0m  [["restaurant_id", 2], ["id", 3], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mReservation Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "reservations" WHERE ((reservations.ends_at IS NULL OR reservations.ends_at > '2017-11-03 17:00:00') AND (reservations.starts_at IS NULL OR reservations.starts_at < '2017-11-03 23:00:00') AND reservations.table_id  = 3) LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK[0m
  Rendering reservations/new.html.erb within layouts/application
  Rendered reservations/_form.html.erb (18.1ms)
  Rendered reservations/new.html.erb within layouts/application (25.6ms)
Completed 200 OK in 173ms (Views: 148.5ms | ActiveRecord: 1.9ms)


Started GET "/restaurants/2/tables/3/reservations" for 127.0.0.1 at 2017-11-03 20:19:31 +0300
Processing by ReservationsController#index as HTML
  Parameters: {"restaurant_id"=>"2", "table_id"=>"3"}
  [1m[36mRestaurant Load (1.0ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTable Load (0.0ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" WHERE "tables"."restaurant_id" = $1 AND "tables"."id" = $2 LIMIT $3[0m  [["restaurant_id", 2], ["id", 3], ["LIMIT", 1]]
  Rendering reservations/index.html.erb within layouts/application
  [1m[36mReservation Load (2.0ms)[0m  [1m[34mSELECT "reservations".* FROM "reservations" WHERE "reservations"."table_id" = $1 ORDER BY "reservations"."starts_at" ASC[0m  [["table_id", 3]]
  Rendered reservations/index.html.erb within layouts/application (4.0ms)
Completed 200 OK in 139ms (Views: 124.1ms | ActiveRecord: 3.0ms)


Started GET "/restaurants/2/tables/3/reservations/new" for 127.0.0.1 at 2017-11-03 20:19:33 +0300
Processing by ReservationsController#new as HTML
  Parameters: {"restaurant_id"=>"2", "table_id"=>"3"}
  [1m[36mRestaurant Load (1.0ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTable Load (0.0ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" WHERE "tables"."restaurant_id" = $1 AND "tables"."id" = $2 LIMIT $3[0m  [["restaurant_id", 2], ["id", 3], ["LIMIT", 1]]
  Rendering reservations/new.html.erb within layouts/application
  Rendered reservations/_form.html.erb (10.5ms)
  Rendered reservations/new.html.erb within layouts/application (18.1ms)
Completed 500 Internal Server Error in 54ms (ActiveRecord: 1.0ms)


  
ActionView::Template::Error (undefined method `empty?' for 0:Fixnum):
    12:       <% end %>
    13: 
    14:       <% # obj.table.restaurant.opened_at.hour == 23 ? 1 : 0 %>
    15:       <%=@reservation.table.restaurant.opened_at.hour.empty? ? 1 : 0%>
    16: 
    17:       <%= f.input :starts_at, start_year: Date.today.year, end_year: Time.now.year + 1, start_hour: @restaurant.opened_at.strftime("%H").to_i, end_hour: @restaurant.closed_at.strftime("%H").to_i, minute_step: 30 %>
    18:       <%= f.input :ends_at, start_year: Date.today.year, end_year: Time.now.year + 1, start_hour: @restaurant.opened_at.strftime("%H").to_i, end_hour: @restaurant.closed_at.strftime("%H").to_i, minute_step: 30 %>
  
app/views/reservations/_form.html.erb:15:in `block in _app_views_reservations__form_html_erb__929999041_98853408'
app/views/reservations/_form.html.erb:1:in `_app_views_reservations__form_html_erb__929999041_98853408'
app/views/reservations/new.html.erb:3:in `_app_views_reservations_new_html_erb___427561213_98872572'
Started GET "/restaurants/2/tables/3/reservations/new" for 127.0.0.1 at 2017-11-03 20:19:44 +0300
Processing by ReservationsController#new as HTML
  Parameters: {"restaurant_id"=>"2", "table_id"=>"3"}
  [1m[36mRestaurant Load (0.0ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTable Load (2.0ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" WHERE "tables"."restaurant_id" = $1 AND "tables"."id" = $2 LIMIT $3[0m  [["restaurant_id", 2], ["id", 3], ["LIMIT", 1]]
  Rendering reservations/new.html.erb within layouts/application
  Rendered reservations/_form.html.erb (19.1ms)
  Rendered reservations/new.html.erb within layouts/application (32.1ms)
Completed 200 OK in 170ms (Views: 154.4ms | ActiveRecord: 2.0ms)


Started POST "/restaurants/2/tables/3/reservations" for 127.0.0.1 at 2017-11-03 20:20:00 +0300
Processing by ReservationsController#create as HTML
  Parameters: {"utf8"=>"‚úì", "authenticity_token"=>"GS9Oz9Aq3Z7ZVz5S4XIN47g5P1NtE+9MTEAWqLNBxb49NmqVTjYLbBtH/s9QHJyRycCQXDjZKgt9u3AerxjDjQ==", "reservation"=>{"table_id"=>"3", "starts_at(1i)"=>"2017", "starts_at(2i)"=>"11", "starts_at(3i)"=>"3", "starts_at(4i)"=>"17", "starts_at(5i)"=>"00", "ends_at(1i)"=>"2017", "ends_at(2i)"=>"11", "ends_at(3i)"=>"3", "ends_at(4i)"=>"23", "ends_at(5i)"=>"00", "visitor_attributes"=>{"name"=>"", "phone"=>"", "note"=>"", "number_persons"=>""}}, "commit"=>"Create Reservation", "restaurant_id"=>"2", "table_id"=>"3"}
  [1m[36mRestaurant Load (0.0ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTable Load (1.0ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" WHERE "tables"."restaurant_id" = $1 AND "tables"."id" = $2 LIMIT $3[0m  [["restaurant_id", 2], ["id", 3], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mReservation Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "reservations" WHERE ((reservations.ends_at IS NULL OR reservations.ends_at > '2017-11-03 17:00:00') AND (reservations.starts_at IS NULL OR reservations.starts_at < '2017-11-03 23:00:00') AND reservations.table_id  = 3) LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK[0m
  Rendering reservations/new.html.erb within layouts/application
  Rendered reservations/_form.html.erb (25.1ms)
  Rendered reservations/new.html.erb within layouts/application (32.1ms)
Completed 200 OK in 208ms (Views: 167.2ms | ActiveRecord: 3.0ms)


Started GET "/restaurants/2/tables/3/reservations" for 127.0.0.1 at 2017-11-03 20:20:45 +0300
Processing by ReservationsController#index as HTML
  Parameters: {"restaurant_id"=>"2", "table_id"=>"3"}
  [1m[36mRestaurant Load (0.0ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTable Load (1.0ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" WHERE "tables"."restaurant_id" = $1 AND "tables"."id" = $2 LIMIT $3[0m  [["restaurant_id", 2], ["id", 3], ["LIMIT", 1]]
  Rendering reservations/index.html.erb within layouts/application
  [1m[36mReservation Load (0.0ms)[0m  [1m[34mSELECT "reservations".* FROM "reservations" WHERE "reservations"."table_id" = $1 ORDER BY "reservations"."starts_at" ASC[0m  [["table_id", 3]]
  Rendered reservations/index.html.erb within layouts/application (3.0ms)
Completed 200 OK in 141ms (Views: 128.0ms | ActiveRecord: 1.0ms)


Started GET "/restaurants/2/tables/3/reservations/new" for 127.0.0.1 at 2017-11-03 20:20:47 +0300
Processing by ReservationsController#new as HTML
  Parameters: {"restaurant_id"=>"2", "table_id"=>"3"}
  [1m[36mRestaurant Load (0.0ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTable Load (0.0ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" WHERE "tables"."restaurant_id" = $1 AND "tables"."id" = $2 LIMIT $3[0m  [["restaurant_id", 2], ["id", 3], ["LIMIT", 1]]
  Rendering reservations/new.html.erb within layouts/application
  Rendered reservations/_form.html.erb (15.8ms)
  Rendered reservations/new.html.erb within layouts/application (24.3ms)
Completed 200 OK in 137ms (Views: 129.9ms | ActiveRecord: 0.0ms)


Started POST "/restaurants/2/tables/3/reservations" for 127.0.0.1 at 2017-11-03 20:20:52 +0300
Processing by ReservationsController#create as HTML
  Parameters: {"utf8"=>"‚úì", "authenticity_token"=>"PuB1qwizhzw9rAaMI18FnC4VeoTG/x65ndSAgwW7e5HZKpMucouVWTngpCIz+DWouJov/fU6fTEgr/iUdja9AA==", "reservation"=>{"table_id"=>"3", "starts_at(1i)"=>"2017", "starts_at(2i)"=>"11", "starts_at(3i)"=>"3", "starts_at(4i)"=>"17", "starts_at(5i)"=>"00", "ends_at(1i)"=>"2017", "ends_at(2i)"=>"11", "ends_at(3i)"=>"3", "ends_at(4i)"=>"23", "ends_at(5i)"=>"00", "visitor_attributes"=>{"name"=>"", "phone"=>"", "note"=>"", "number_persons"=>""}}, "commit"=>"Create Reservation", "restaurant_id"=>"2", "table_id"=>"3"}
  [1m[36mRestaurant Load (1.0ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTable Load (0.5ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" WHERE "tables"."restaurant_id" = $1 AND "tables"."id" = $2 LIMIT $3[0m  [["restaurant_id", 2], ["id", 3], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mReservation Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "reservations" WHERE ((reservations.ends_at IS NULL OR reservations.ends_at > '2017-11-03 17:00:00') AND (reservations.starts_at IS NULL OR reservations.starts_at < '2017-11-03 23:00:00') AND reservations.table_id  = 3) LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK[0m
  Rendering reservations/new.html.erb within layouts/application
  Rendered reservations/_form.html.erb (16.0ms)
  Rendered reservations/new.html.erb within layouts/application (25.1ms)
Completed 200 OK in 159ms (Views: 141.7ms | ActiveRecord: 2.0ms)


Started GET "/restaurants/2/tables/3/reservations" for 127.0.0.1 at 2017-11-03 20:21:16 +0300
Processing by ReservationsController#index as HTML
  Parameters: {"restaurant_id"=>"2", "table_id"=>"3"}
  [1m[36mRestaurant Load (0.0ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTable Load (0.0ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" WHERE "tables"."restaurant_id" = $1 AND "tables"."id" = $2 LIMIT $3[0m  [["restaurant_id", 2], ["id", 3], ["LIMIT", 1]]
  Rendering reservations/index.html.erb within layouts/application
  [1m[36mReservation Load (0.0ms)[0m  [1m[34mSELECT "reservations".* FROM "reservations" WHERE "reservations"."table_id" = $1 ORDER BY "reservations"."starts_at" ASC[0m  [["table_id", 3]]
  Rendered reservations/index.html.erb within layouts/application (3.0ms)
Completed 200 OK in 130ms (Views: 115.4ms | ActiveRecord: 0.0ms)


Started GET "/restaurants/2/tables/3/reservations/new" for 127.0.0.1 at 2017-11-03 20:21:18 +0300
Processing by ReservationsController#new as HTML
  Parameters: {"restaurant_id"=>"2", "table_id"=>"3"}
  [1m[36mRestaurant Load (0.0ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTable Load (1.0ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" WHERE "tables"."restaurant_id" = $1 AND "tables"."id" = $2 LIMIT $3[0m  [["restaurant_id", 2], ["id", 3], ["LIMIT", 1]]
  Rendering reservations/new.html.erb within layouts/application
  Rendered reservations/_form.html.erb (14.1ms)
  Rendered reservations/new.html.erb within layouts/application (20.2ms)
Completed 200 OK in 133ms (Views: 119.4ms | ActiveRecord: 1.0ms)


Started POST "/restaurants/2/tables/3/reservations" for 127.0.0.1 at 2017-11-03 20:21:22 +0300
Processing by ReservationsController#create as HTML
  Parameters: {"utf8"=>"‚úì", "authenticity_token"=>"xb2na4O2PJ3qMM++DAO+AyfBkglriCdvVt+cjBiMm64id0Hu+Y4u+O58bRAcpI43sU7HcFhNROfrpOSbawFdPw==", "reservation"=>{"table_id"=>"3", "starts_at(1i)"=>"2017", "starts_at(2i)"=>"11", "starts_at(3i)"=>"3", "starts_at(4i)"=>"17", "starts_at(5i)"=>"00", "ends_at(1i)"=>"2017", "ends_at(2i)"=>"11", "ends_at(3i)"=>"3", "ends_at(4i)"=>"23", "ends_at(5i)"=>"00", "visitor_attributes"=>{"name"=>"", "phone"=>"", "note"=>"", "number_persons"=>""}}, "commit"=>"Create Reservation", "restaurant_id"=>"2", "table_id"=>"3"}
  [1m[36mRestaurant Load (0.9ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTable Load (1.0ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" WHERE "tables"."restaurant_id" = $1 AND "tables"."id" = $2 LIMIT $3[0m  [["restaurant_id", 2], ["id", 3], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mReservation Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "reservations" WHERE ((reservations.ends_at IS NULL OR reservations.ends_at > '2017-11-03 17:00:00') AND (reservations.starts_at IS NULL OR reservations.starts_at < '2017-11-03 23:00:00') AND reservations.table_id  = 3) LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  Rendering reservations/new.html.erb within layouts/application
  Rendered reservations/_form.html.erb (23.1ms)
  Rendered reservations/new.html.erb within layouts/application (39.1ms)
Completed 200 OK in 199ms (Views: 166.0ms | ActiveRecord: 2.4ms)


Started GET "/restaurants/2/tables/3/reservations" for 127.0.0.1 at 2017-11-03 20:21:49 +0300
Processing by ReservationsController#index as HTML
  Parameters: {"restaurant_id"=>"2", "table_id"=>"3"}
  [1m[36mRestaurant Load (0.0ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTable Load (1.0ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" WHERE "tables"."restaurant_id" = $1 AND "tables"."id" = $2 LIMIT $3[0m  [["restaurant_id", 2], ["id", 3], ["LIMIT", 1]]
  Rendering reservations/index.html.erb within layouts/application
  [1m[36mReservation Load (1.0ms)[0m  [1m[34mSELECT "reservations".* FROM "reservations" WHERE "reservations"."table_id" = $1 ORDER BY "reservations"."starts_at" ASC[0m  [["table_id", 3]]
  Rendered reservations/index.html.erb within layouts/application (4.0ms)
Completed 200 OK in 131ms (Views: 114.4ms | ActiveRecord: 2.0ms)


Started GET "/restaurants/2/tables/3/reservations/new" for 127.0.0.1 at 2017-11-03 20:21:50 +0300
Processing by ReservationsController#new as HTML
  Parameters: {"restaurant_id"=>"2", "table_id"=>"3"}
  [1m[36mRestaurant Load (0.5ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTable Load (1.0ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" WHERE "tables"."restaurant_id" = $1 AND "tables"."id" = $2 LIMIT $3[0m  [["restaurant_id", 2], ["id", 3], ["LIMIT", 1]]
  Rendering reservations/new.html.erb within layouts/application
  Rendered reservations/_form.html.erb (16.1ms)
  Rendered reservations/new.html.erb within layouts/application (22.1ms)
Completed 200 OK in 136ms (Views: 120.4ms | ActiveRecord: 1.5ms)


Started POST "/restaurants/2/tables/3/reservations" for 127.0.0.1 at 2017-11-03 20:21:55 +0300
Processing by ReservationsController#create as HTML
  Parameters: {"utf8"=>"‚úì", "authenticity_token"=>"gMlNhzXFwLUV3kTgHqafBxMXnnHy9HUEZ2Cq2xI8OzpnA6sCT/3S0BGS5k4OAa8zhZjLCMExFozaG9LMYbH9qw==", "reservation"=>{"table_id"=>"3", "starts_at(1i)"=>"2017", "starts_at(2i)"=>"11", "starts_at(3i)"=>"3", "starts_at(4i)"=>"17", "starts_at(5i)"=>"00", "ends_at(1i)"=>"2017", "ends_at(2i)"=>"11", "ends_at(3i)"=>"3", "ends_at(4i)"=>"23", "ends_at(5i)"=>"00", "visitor_attributes"=>{"name"=>"", "phone"=>"", "note"=>"", "number_persons"=>""}}, "commit"=>"Create Reservation", "restaurant_id"=>"2", "table_id"=>"3"}
  [1m[36mRestaurant Load (0.0ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTable Load (0.0ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" WHERE "tables"."restaurant_id" = $1 AND "tables"."id" = $2 LIMIT $3[0m  [["restaurant_id", 2], ["id", 3], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mReservation Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "reservations" WHERE ((reservations.ends_at IS NULL OR reservations.ends_at > '2017-11-03 17:00:00') AND (reservations.starts_at IS NULL OR reservations.starts_at < '2017-11-03 23:00:00') AND reservations.table_id  = 3) LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK[0m
  Rendering reservations/new.html.erb within layouts/application
  Rendered reservations/_form.html.erb (23.6ms)
  Rendered reservations/new.html.erb within layouts/application (33.1ms)
Completed 200 OK in 183ms (Views: 163.9ms | ActiveRecord: 2.0ms)


Started GET "/restaurants/2/tables/3/reservations" for 127.0.0.1 at 2017-11-03 20:22:17 +0300
Processing by ReservationsController#index as HTML
  Parameters: {"restaurant_id"=>"2", "table_id"=>"3"}
  [1m[36mRestaurant Load (0.0ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTable Load (0.0ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" WHERE "tables"."restaurant_id" = $1 AND "tables"."id" = $2 LIMIT $3[0m  [["restaurant_id", 2], ["id", 3], ["LIMIT", 1]]
  Rendering reservations/index.html.erb within layouts/application
  [1m[36mReservation Load (0.0ms)[0m  [1m[34mSELECT "reservations".* FROM "reservations" WHERE "reservations"."table_id" = $1 ORDER BY "reservations"."starts_at" ASC[0m  [["table_id", 3]]
  Rendered reservations/index.html.erb within layouts/application (3.0ms)
Completed 200 OK in 156ms (Views: 142.8ms | ActiveRecord: 0.0ms)


Started GET "/restaurants/2/tables/3/reservations/new" for 127.0.0.1 at 2017-11-03 20:22:18 +0300
Processing by ReservationsController#new as HTML
  Parameters: {"restaurant_id"=>"2", "table_id"=>"3"}
  [1m[36mRestaurant Load (1.0ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTable Load (1.0ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" WHERE "tables"."restaurant_id" = $1 AND "tables"."id" = $2 LIMIT $3[0m  [["restaurant_id", 2], ["id", 3], ["LIMIT", 1]]
  Rendering reservations/new.html.erb within layouts/application
  Rendered reservations/_form.html.erb (15.5ms)
  Rendered reservations/new.html.erb within layouts/application (32.4ms)
Completed 200 OK in 135ms (Views: 120.6ms | ActiveRecord: 2.0ms)


Started POST "/restaurants/2/tables/3/reservations" for 127.0.0.1 at 2017-11-03 20:22:28 +0300
Processing by ReservationsController#create as HTML
  Parameters: {"utf8"=>"‚úì", "authenticity_token"=>"CJL6B4etHO4yxKp9Zuj5leMC05IVcS3N+NTOyZoOUjfvWByC/ZUOizaICNN2T8mhdY2G6ya0TkVFr7be6YOUpg==", "reservation"=>{"table_id"=>"3", "starts_at(1i)"=>"2017", "starts_at(2i)"=>"11", "starts_at(3i)"=>"3", "starts_at(4i)"=>"17", "starts_at(5i)"=>"00", "ends_at(1i)"=>"2017", "ends_at(2i)"=>"11", "ends_at(3i)"=>"3", "ends_at(4i)"=>"17", "ends_at(5i)"=>"00", "visitor_attributes"=>{"name"=>"", "phone"=>"", "note"=>"", "number_persons"=>""}}, "commit"=>"Create Reservation", "restaurant_id"=>"2", "table_id"=>"3"}
  [1m[36mRestaurant Load (0.0ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTable Load (3.0ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" WHERE "tables"."restaurant_id" = $1 AND "tables"."id" = $2 LIMIT $3[0m  [["restaurant_id", 2], ["id", 3], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mReservation Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "reservations" WHERE ((reservations.ends_at IS NULL OR reservations.ends_at > '2017-11-03 17:00:00') AND (reservations.starts_at IS NULL OR reservations.starts_at < '2017-11-03 17:00:00') AND reservations.table_id  = 3) LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK[0m
  Rendering reservations/new.html.erb within layouts/application
  Rendered reservations/_form.html.erb (20.1ms)
  Rendered reservations/new.html.erb within layouts/application (35.1ms)
Completed 200 OK in 214ms (Views: 182.9ms | ActiveRecord: 4.0ms)


Started POST "/restaurants/2/tables/3/reservations" for 127.0.0.1 at 2017-11-03 20:33:31 +0300
Processing by ReservationsController#create as HTML
  Parameters: {"utf8"=>"‚úì", "authenticity_token"=>"LlpW7TazuhiG0JNkPG49s80JrSdAko4jtG9BjkGOKRwKQ3K3qK9s6kTAU/mNAKzBvPACKBVYS2SFlCc4XdcvLw==", "reservation"=>{"table_id"=>"3", "starts_at(1i)"=>"2017", "starts_at(2i)"=>"11", "starts_at(3i)"=>"3", "starts_at(4i)"=>"17", "starts_at(5i)"=>"00", "ends_at(1i)"=>"2017", "ends_at(2i)"=>"11", "ends_at(3i)"=>"4", "ends_at(4i)"=>"02", "ends_at(5i)"=>"00", "visitor_attributes"=>{"name"=>"", "phone"=>"", "note"=>"", "number_persons"=>""}}, "commit"=>"Create Reservation", "restaurant_id"=>"2", "table_id"=>"3"}
  [1m[36mRestaurant Load (0.0ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTable Load (0.0ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" WHERE "tables"."restaurant_id" = $1 AND "tables"."id" = $2 LIMIT $3[0m  [["restaurant_id", 2], ["id", 3], ["LIMIT", 1]]
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mReservation Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "reservations" WHERE ((reservations.ends_at IS NULL OR reservations.ends_at > '2017-11-03 17:00:00') AND (reservations.starts_at IS NULL OR reservations.starts_at < '2017-11-04 02:00:00') AND reservations.table_id  = 3) LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK[0m
  Rendering reservations/new.html.erb within layouts/application
  Rendered reservations/_form.html.erb (19.0ms)
  Rendered reservations/new.html.erb within layouts/application (26.1ms)
Completed 200 OK in 208ms (Views: 137.1ms | ActiveRecord: 1.0ms)


Started POST "/restaurants/2/tables/3/reservations" for 127.0.0.1 at 2017-11-03 20:34:07 +0300
Processing by ReservationsController#create as HTML
  Parameters: {"utf8"=>"‚úì", "authenticity_token"=>"1Xlss3gw8sTKWCmaHO5aEKCsNtFDwwX8cB/Xzq1KmGHxYEjp5iwkNghI6QetgMti0VWZ3hYJwLtB5LF4sROeUg==", "reservation"=>{"table_id"=>"3", "starts_at(1i)"=>"2017", "starts_at(2i)"=>"11", "starts_at(3i)"=>"3", "starts_at(4i)"=>"17", "starts_at(5i)"=>"00", "ends_at(1i)"=>"2017", "ends_at(2i)"=>"11", "ends_at(3i)"=>"4", "ends_at(4i)"=>"02", "ends_at(5i)"=>"00", "visitor_attributes"=>{"name"=>"", "phone"=>"", "note"=>"", "number_persons"=>""}}, "commit"=>"Create Reservation", "restaurant_id"=>"2", "table_id"=>"3"}
  [1m[36mRestaurant Load (0.0ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTable Load (0.0ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" WHERE "tables"."restaurant_id" = $1 AND "tables"."id" = $2 LIMIT $3[0m  [["restaurant_id", 2], ["id", 3], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mReservation Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "reservations" WHERE ((reservations.ends_at IS NULL OR reservations.ends_at > '2017-11-03 17:00:00') AND (reservations.starts_at IS NULL OR reservations.starts_at < '2017-11-04 02:00:00') AND reservations.table_id  = 3) LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK[0m
  Rendering reservations/new.html.erb within layouts/application
  Rendered reservations/_form.html.erb (19.1ms)
  Rendered reservations/new.html.erb within layouts/application (28.1ms)
Completed 200 OK in 219ms (Views: 148.7ms | ActiveRecord: 1.0ms)


Started POST "/restaurants/2/tables/3/reservations" for 127.0.0.1 at 2017-11-03 20:34:29 +0300
Processing by ReservationsController#create as HTML
  Parameters: {"utf8"=>"‚úì", "authenticity_token"=>"OpyWd9i04LcWt64n4GtCUpUSqEOp5bF7iufWQtAtPLgehbItRqg2RdSnbrpRBdMg5OsHTPwvdDy7HLD0zHQ6iw==", "reservation"=>{"table_id"=>"3", "starts_at(1i)"=>"2017", "starts_at(2i)"=>"11", "starts_at(3i)"=>"3", "starts_at(4i)"=>"17", "starts_at(5i)"=>"00", "ends_at(1i)"=>"2017", "ends_at(2i)"=>"11", "ends_at(3i)"=>"4", "ends_at(4i)"=>"02", "ends_at(5i)"=>"00", "visitor_attributes"=>{"name"=>"", "phone"=>"", "note"=>"", "number_persons"=>""}}, "commit"=>"Create Reservation", "restaurant_id"=>"2", "table_id"=>"3"}
  [1m[36mRestaurant Load (1.0ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTable Load (1.0ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" WHERE "tables"."restaurant_id" = $1 AND "tables"."id" = $2 LIMIT $3[0m  [["restaurant_id", 2], ["id", 3], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mReservation Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "reservations" WHERE ((reservations.ends_at IS NULL OR reservations.ends_at > '2017-11-03 17:00:00') AND (reservations.starts_at IS NULL OR reservations.starts_at < '2017-11-04 02:00:00') AND reservations.table_id  = 3) LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK[0m
  Rendering reservations/new.html.erb within layouts/application
  Rendered reservations/_form.html.erb (16.6ms)
  Rendered reservations/new.html.erb within layouts/application (23.1ms)
Completed 200 OK in 195ms (Views: 126.7ms | ActiveRecord: 3.7ms)


Started POST "/restaurants/2/tables/3/reservations" for 127.0.0.1 at 2017-11-03 20:35:12 +0300
Processing by ReservationsController#create as HTML
  Parameters: {"utf8"=>"‚úì", "authenticity_token"=>"LDo4ilPRtiK9y3IDPurP7ihAmB4fNCur2wd21qi9dWMIIxzQzc1g0H/bsp6PhF6cWbk3EUr+7uzq/BBgtORzUA==", "reservation"=>{"table_id"=>"3", "starts_at(1i)"=>"2017", "starts_at(2i)"=>"11", "starts_at(3i)"=>"3", "starts_at(4i)"=>"17", "starts_at(5i)"=>"00", "ends_at(1i)"=>"2017", "ends_at(2i)"=>"11", "ends_at(3i)"=>"4", "ends_at(4i)"=>"02", "ends_at(5i)"=>"00", "visitor_attributes"=>{"name"=>"", "phone"=>"", "note"=>"", "number_persons"=>""}}, "commit"=>"Create Reservation", "restaurant_id"=>"2", "table_id"=>"3"}
  [1m[36mRestaurant Load (0.0ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTable Load (1.0ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" WHERE "tables"."restaurant_id" = $1 AND "tables"."id" = $2 LIMIT $3[0m  [["restaurant_id", 2], ["id", 3], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mReservation Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "reservations" WHERE ((reservations.ends_at IS NULL OR reservations.ends_at > '2017-11-03 17:00:00') AND (reservations.starts_at IS NULL OR reservations.starts_at < '2017-11-04 02:00:00') AND reservations.table_id  = 3) LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK[0m
  Rendering reservations/new.html.erb within layouts/application
  Rendered reservations/_form.html.erb (16.0ms)
  Rendered reservations/new.html.erb within layouts/application (24.3ms)
Completed 200 OK in 192ms (Views: 127.1ms | ActiveRecord: 2.3ms)


Started POST "/restaurants/2/tables/3/reservations" for 127.0.0.1 at 2017-11-03 20:36:19 +0300
Processing by ReservationsController#create as HTML
  Parameters: {"utf8"=>"‚úì", "authenticity_token"=>"RI2e8rET/CTXMTauM5kHGrtFG5LG2Ta0ixPrM+S3D/5glLqoLw8q1hUh9jOC95Zoyry0nZMT8/O66I2F+O4JzQ==", "reservation"=>{"table_id"=>"3", "starts_at(1i)"=>"2017", "starts_at(2i)"=>"11", "starts_at(3i)"=>"3", "starts_at(4i)"=>"17", "starts_at(5i)"=>"00", "ends_at(1i)"=>"2017", "ends_at(2i)"=>"11", "ends_at(3i)"=>"4", "ends_at(4i)"=>"02", "ends_at(5i)"=>"00", "visitor_attributes"=>{"name"=>"", "phone"=>"", "note"=>"", "number_persons"=>""}}, "commit"=>"Create Reservation", "restaurant_id"=>"2", "table_id"=>"3"}
  [1m[36mRestaurant Load (0.0ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTable Load (1.0ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" WHERE "tables"."restaurant_id" = $1 AND "tables"."id" = $2 LIMIT $3[0m  [["restaurant_id", 2], ["id", 3], ["LIMIT", 1]]
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mReservation Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "reservations" WHERE ((reservations.ends_at IS NULL OR reservations.ends_at > '2017-11-03 17:00:00') AND (reservations.starts_at IS NULL OR reservations.starts_at < '2017-11-04 02:00:00') AND reservations.table_id  = 3) LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK[0m
  Rendering reservations/new.html.erb within layouts/application
  Rendered reservations/_form.html.erb (17.9ms)
  Rendered reservations/new.html.erb within layouts/application (26.0ms)
Completed 200 OK in 207ms (Views: 127.4ms | ActiveRecord: 3.0ms)


Started POST "/restaurants/2/tables/3/reservations" for 127.0.0.1 at 2017-11-03 20:36:34 +0300
Processing by ReservationsController#create as HTML
  Parameters: {"utf8"=>"‚úì", "authenticity_token"=>"cyrPGLOd+NHHlCyUmRy0XQuYX5c0FuK/MMekfDeTWulXM+tCLYEuIwWE7AkociUvemHwmGHcJ/gBPMLKK8pc2g==", "reservation"=>{"table_id"=>"3", "starts_at(1i)"=>"2017", "starts_at(2i)"=>"11", "starts_at(3i)"=>"3", "starts_at(4i)"=>"17", "starts_at(5i)"=>"00", "ends_at(1i)"=>"2017", "ends_at(2i)"=>"11", "ends_at(3i)"=>"4", "ends_at(4i)"=>"02", "ends_at(5i)"=>"00", "visitor_attributes"=>{"name"=>"Mark", "phone"=>"+380732172199", "note"=>"", "number_persons"=>"2"}}, "commit"=>"Create Reservation", "restaurant_id"=>"2", "table_id"=>"3"}
  [1m[36mRestaurant Load (0.0ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTable Load (0.0ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" WHERE "tables"."restaurant_id" = $1 AND "tables"."id" = $2 LIMIT $3[0m  [["restaurant_id", 2], ["id", 3], ["LIMIT", 1]]
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mReservation Exists (2.0ms)[0m  [1m[34mSELECT  1 AS one FROM "reservations" WHERE ((reservations.ends_at IS NULL OR reservations.ends_at > '2017-11-03 17:00:00') AND (reservations.starts_at IS NULL OR reservations.starts_at < '2017-11-04 02:00:00') AND reservations.table_id  = 3) LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (2.0ms)[0m  [1m[32mINSERT INTO "reservations" ("table_id", "starts_at", "ends_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["table_id", 3], ["starts_at", "2017-11-03 17:00:00"], ["ends_at", "2017-11-04 02:00:00"], ["created_at", "2017-11-03 17:36:34.183935"], ["updated_at", "2017-11-03 17:36:34.183935"]]
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "visitors" ("reservation_id", "name", "phone", "note", "number_persons", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["reservation_id", 4], ["name", "Mark"], ["phone", "+380732172199"], ["note", ""], ["number_persons", 2], ["created_at", "2017-11-03 17:36:34.187940"], ["updated_at", "2017-11-03 17:36:34.187940"]]
  [1m[35m (10.0ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/restaurants/2/tables/3/reservations/4
Completed 302 Found in 34ms (ActiveRecord: 16.0ms)


Started GET "/restaurants/2/tables/3/reservations/4" for 127.0.0.1 at 2017-11-03 20:36:34 +0300
Processing by ReservationsController#show as HTML
  Parameters: {"restaurant_id"=>"2", "table_id"=>"3", "id"=>"4"}
  [1m[36mRestaurant Load (0.0ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTable Load (1.0ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" WHERE "tables"."restaurant_id" = $1 AND "tables"."id" = $2 LIMIT $3[0m  [["restaurant_id", 2], ["id", 3], ["LIMIT", 1]]
  [1m[36mReservation Load (1.0ms)[0m  [1m[34mSELECT  "reservations".* FROM "reservations" WHERE "reservations"."table_id" = $1 AND "reservations"."id" = $2 LIMIT $3[0m  [["table_id", 3], ["id", 4], ["LIMIT", 1]]
  Rendering reservations/show.html.erb within layouts/application
  [1m[36mVisitor Load (2.0ms)[0m  [1m[34mSELECT  "visitors".* FROM "visitors" WHERE "visitors"."reservation_id" = $1 LIMIT $2[0m  [["reservation_id", 4], ["LIMIT", 1]]
  Rendered reservations/show.html.erb within layouts/application (5.0ms)
Completed 200 OK in 131ms (Views: 114.6ms | ActiveRecord: 4.0ms)


Started GET "/restaurants/2/tables/3/reservations" for 127.0.0.1 at 2017-11-03 20:36:44 +0300
Processing by ReservationsController#index as HTML
  Parameters: {"restaurant_id"=>"2", "table_id"=>"3"}
  [1m[36mRestaurant Load (0.0ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTable Load (0.0ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" WHERE "tables"."restaurant_id" = $1 AND "tables"."id" = $2 LIMIT $3[0m  [["restaurant_id", 2], ["id", 3], ["LIMIT", 1]]
  Rendering reservations/index.html.erb within layouts/application
  [1m[36mReservation Load (0.0ms)[0m  [1m[34mSELECT "reservations".* FROM "reservations" WHERE "reservations"."table_id" = $1 ORDER BY "reservations"."starts_at" ASC[0m  [["table_id", 3]]
  Rendered reservations/index.html.erb within layouts/application (1.1ms)
Completed 200 OK in 115ms (Views: 101.4ms | ActiveRecord: 0.0ms)


